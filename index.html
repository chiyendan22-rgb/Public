<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Tranh BÃ¡ VÃ´ Song</title>
<style>
body{margin:0;background:black;color:white;font-family:Arial}
button,input{padding:8px;margin:4px}
#login,#admin,#game{
position:fixed;top:0;left:0;width:100%;height:100%;
display:flex;flex-direction:column;align-items:center;justify-content:center
}
#admin,#game{display:none}
.box{border:1px solid #555;padding:10px;margin:5px;width:90%}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login">
<h1 style="color:red">TRANH BÃ VÃ” SONG</h1>
<input id="user" placeholder="TÃ i khoáº£n">
<input id="pass" type="password" placeholder="Máº­t kháº©u">
<button onclick="login()">ÄÄ‚NG NHáº¬P</button>
<div id="msg"></div>
</div>

<!-- ADMIN PANEL -->
<div id="admin">
<h2>ğŸ‘‘ ADMIN SERVER</h2>
<div id="serverList"></div>
<button onclick="addServer()">â• Táº¡o server</button>
<button onclick="resetServers()">ğŸ”„ Reset táº¥t cáº£</button>
<button onclick="logout()">ThoÃ¡t</button>
</div>

<!-- GAME -->
<div id="game">
<h2>ğŸ® GAME ÄANG CHáº Y</h2>
<div id="info"></div>
<button onclick="leave()">Rá»i server</button>
</div>

<script>
/* ==== ADMIN INFO ==== */
const ADMIN_USER="Anhtuan2708@";
const ADMIN_PASS="tuan2708@";

/* ==== DATA ==== */
let servers = JSON.parse(localStorage.getItem("servers")) || [
 {id:1,players:0,active:true}
];
let currentServer=null;

/* ==== LOGIN ==== */
function login(){
 let u=user.value,p=pass.value;
 if(u===ADMIN_USER && p===ADMIN_PASS){
  login.style.display="none";
  admin.style.display="flex";
  renderServers();
 }else{
  joinServer();
 }
}

/* ==== SERVER LOGIC ==== */
function renderServers(){
 let html="";
 servers.forEach(s=>{
  html+=`<div class="box">
   Server ${s.id} | ğŸ‘¥ ${s.players}/20 | ${s.active?"ğŸŸ¢":"ğŸ”´"}
   <button onclick="closeServer(${s.id})">ÄÃ³ng</button>
  </div>`;
 });
 serverList.innerHTML=html;
 localStorage.setItem("servers",JSON.stringify(servers));
}

function addServer(){
 servers.push({id:servers.length+1,players:0,active:true});
 renderServers();
}

function closeServer(id){
 let s=servers.find(x=>x.id===id);
 if(s) s.active=false;
 renderServers();
}

function resetServers(){
 if(!confirm("Reset toÃ n bá»™ server?"))return;
 servers=[{id:1,players:0,active:true}];
 renderServers();
}

/* ==== PLAYER JOIN ==== */
function joinServer(){
 let s=servers.find(x=>x.active && x.players<20);
 if(!s) return alert("KhÃ´ng cÃ³ server trá»‘ng");
 s.players++;
 currentServer=s;
 localStorage.setItem("servers",JSON.stringify(servers));
 login.style.display="none";
 game.style.display="flex";
 info.innerText=`Äang á»Ÿ Server ${s.id} (${s.players}/20)`;
}

/* ==== LEAVE ==== */
function leave(){
 currentServer.players--;
 localStorage.setItem("servers",JSON.stringify(servers));
 location.reload();
}

function logout(){
 location.reload();
}
</script>
</body>
</html>